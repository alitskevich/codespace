<component id="App">
  <DarkModeService Ref="dark" />
  <LocalStorage Ref="localStorage" />
  <DropdownsPlugin />

  <ToastFacility>
    <GreenAppFacility Props="{R.green}">
      <BrowserService Ref="browser" title="{R.name}" />
      <NavigationService Ref="nav" />
      <FirebaseService Ref="firebase" Props="{R.firebaseConfig}" />
      <SignInPage If="<-auth.isAuthorized | not">
        <Else>
          <UserProfileService Ref="user" persistence="{R.auth.persistence}" api="<-firebase.This" />
          <AsyncLoader isLoading="<-user.isLoading" title="{R.strings.app_load_user_profile}"
            subtitle="{R.strings.app_load_user_profile_subtitle}">
            <PageRouter Props="<-nav.route" />
          </AsyncLoader>
          <UserProfileModal If="<-localStorage.showUserProfile" />
        </Else>
      </SignInPage>
    </GreenAppFacility>
  </ToastFacility>
</component>