<component id="Page.Irregular">
  <IndexedDbQuery Ref="query" db="<-db" store="irregular" value="*" />

  <Connector data="<-query.data" change="-> data" />

  <Connector data="<- localStorage.irregularVerbsMode" change="-> quizMode" />

  <div class="fixed inset-0 pt-20">
    <Container class="flex flex-col items-stretch gap-4 h-full">
      <div class=" flex-auto flex flex-col min-h-0">
        <AsyncLoader isLoading="{data|not}" title="Wait..." subtitle="ðŸš€  Loading data" error="<-db.error"
          onError="-> db.downstream()">
          <Fragment If="!data.length">
            <Stub title="No data">
              <Btn title="{R.strings.add_a_new_item}" icon="plus" tooltip="{R.strings.add_a_new_item}"
                action="-> newItem.showModal=true" />
            </Stub>
            <Else>
              <Table class="" data="{data}" columns="{quizMode ? R.columns.irregularQuiz : R.columns.irregular}"
                cellChange="-> db.upsertLocally()" sortBy="{sortBy}" click="-> nav.onParams()" />
            </Else>
          </Fragment>
        </AsyncLoader>
      </div>
    </Container>
  </div>

  <Header>
    <Btn title="{quizMode ? R.strings.stop : R.strings.quiz}"
      class="!text-white {quizMode ? '!bg-red-700' : '!bg-green-700'}"
      action="-> localStorage.irregularVerbsMode=!quizMode" />
  </Header>
</component>