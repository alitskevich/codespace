<component id="Page.Mywords">
  <Connector data="<- localStorage.domainId ?? 'OBJ'" change="-> domainId" />

  <IndexedDbQuery Ref="query" db="<-db" store="thesaurus" value="*" />
  <Connector data="<-query.data|arrayGroupBy:'domain'" change="-> domains" />
  <div class="fixed inset-0 pt-20">
    <div class="flex flex-col items-stretch gap-4 h-full">
      <div class=" flex-auto flex flex-col   min-h-0">
        <MResultList data="{domains[domainId]['items']|arrayGroupBy:'topic'|valuesOf}" />
      </div>
    </div>
  </div>
  <Header>
    <TopListSelector data="{domains|keysOf}" change="-> localStorage.domainId = it.value" value="{domainId}" />
  </Header>
</component>

<component id="MResultList">
  <Fragment If="!data.length">
    <span>No data.</span>
    <Else>
      <Table class="" data="{data}" columns="{R.columns.thesaurus}" sortBy="{sortBy}" click="-> nav.onParams()" />
    </Else>
  </Fragment>
</component>