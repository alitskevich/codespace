<component id="App">
  <DropdownsPlugin />
  <ToastFacility>
    <LocalStorage Ref="localStorage" />

    <StoredData Ref="language" defaults="en" />

    <DarkModeService Ref="dark" />

    <BrowserService Ref="browser" title="{R.name}" />

    <SpeechService Ref="speech" />

    <NavigationService Ref="nav" />

    <IndexedDbService Ref="db" (...)="{R.db}" />

    <WordsStore Ref="words" concepts="<-db.allConcepts" interview="<-db.allInterview"
      level="<-localStorage.level ?? 'A'" acquired="<-db.allAcquired|arrayToObject" />

    <Connector data="<-nav.route" change="-> route" />

    <Connector Ref="idiomsHash" data="<-db.allIdioms|idiomsHash" />

    <Dynamic As="Page.{route.page ?? 'Loading' | capitalize}" (...)="{route}" />

  </ToastFacility>
</component>